(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define(["require", "exports", "../vdom", "./resize"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var vdom_1 = require("../vdom");
    var resize_1 = require("./resize");
    var factory = vdom_1.create({ resize: resize_1.resize });
    function createBreakpointMiddleware(breakpoints) {
        if (breakpoints === void 0) { breakpoints = { SM: 0, MD: 576, LG: 768, XL: 960 }; }
        var defaultBreakpoints = breakpoints;
        var breakpoint = factory(function (_a) {
            var resize = _a.middleware.resize;
            return {
                get: function (key, breakpoints) {
                    if (breakpoints === void 0) { breakpoints = defaultBreakpoints; }
                    var contentRect = resize.get(key);
                    if (!contentRect) {
                        return null;
                    }
                    var currentBreakpoint = null;
                    var keys = Object.keys(breakpoints);
                    for (var i = 0; i < keys.length; i++) {
                        var breakpoint_1 = breakpoints[keys[i]];
                        if (contentRect.width >= breakpoint_1 &&
                            (!currentBreakpoint || breakpoint_1 > currentBreakpoint.size)) {
                            currentBreakpoint = {
                                name: keys[i],
                                size: breakpoint_1
                            };
                        }
                    }
                    if (currentBreakpoint) {
                        return {
                            breakpoint: currentBreakpoint.name,
                            contentRect: contentRect
                        };
                    }
                    return null;
                }
            };
        });
        return breakpoint;
    }
    exports.createBreakpointMiddleware = createBreakpointMiddleware;
    var breakpoint = createBreakpointMiddleware();
    exports.default = breakpoint;
});
//# sourceMappingURL=breakpoint.js.map