{"version":3,"file":"validity.js","sourceRoot":"","sources":["validity.ts"],"names":[],"mappings":";;;;;;;;;;;IAAA,gCAAoD;IAEpD,IAAM,OAAO,GAAG,aAAM,CAAC,EAAE,IAAI,aAAA,EAAE,WAAW,oBAAA,EAAE,CAAC,CAAC;IAE9C,IAAM,QAAQ,GAAG,OAAO,CAAC,UAAS,EAAqC;YAAnC,kBAAiC,EAAnB,cAAI,EAAE,4BAAW;QAClE,OAAO;YACN,GAAG,EAAH,UAAI,GAAoB,EAAE,KAAa;gBACtC,IAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAgC,CAAC;gBAE7D,IAAI,CAAC,OAAO,EAAE;oBACb,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;iBACzC;gBAED,IAAI,KAAK,KAAK,OAAO,CAAC,KAAK,EAAE;oBAC5B,UAAU,CAAC,cAAM,OAAA,WAAW,EAAE,EAAb,CAAa,CAAC,CAAC;iBAChC;gBAED,OAAO;oBACN,KAAK,EAAE,OAAO,CAAC,QAAQ,CAAC,KAAK;oBAC7B,OAAO,EAAE,OAAO,CAAC,iBAAiB;iBAClC,CAAC;YACH,CAAC;SACD,CAAC;IACH,CAAC,CAAC,CAAC;IAEH,kBAAe,QAAQ,CAAC","sourcesContent":["import { create, node, invalidator } from '../vdom';\n\nconst factory = create({ node, invalidator });\n\nconst validity = factory(function({ middleware: { node, invalidator } }) {\n\treturn {\n\t\tget(key: string | number, value: string) {\n\t\t\tconst domNode = node.get(key) as HTMLFormElement | undefined;\n\n\t\t\tif (!domNode) {\n\t\t\t\treturn { valid: undefined, message: '' };\n\t\t\t}\n\n\t\t\tif (value !== domNode.value) {\n\t\t\t\tsetTimeout(() => invalidator());\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tvalid: domNode.validity.valid,\n\t\t\t\tmessage: domNode.validationMessage\n\t\t\t};\n\t\t}\n\t};\n});\n\nexport default validity;\n"]}