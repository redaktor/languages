{"version":3,"file":"validity.mjs","sourceRoot":"","sources":["validity.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,MAAM,SAAS,CAAC;AAEpD,MAAM,OAAO,GAAG,MAAM,CAAC,EAAE,IAAI,EAAE,WAAW,EAAE,CAAC,CAAC;AAE9C,MAAM,QAAQ,GAAG,OAAO,CAAC,UAAS,EAAE,UAAU,EAAE,EAAE,IAAI,EAAE,WAAW,EAAE,EAAE;IACtE,OAAO;QACN,GAAG,CAAC,GAAoB,EAAE,KAAa;YACtC,MAAM,OAAO,GAAG,IAAI,CAAC,GAAG,CAAC,GAAG,CAAgC,CAAC;YAE7D,IAAI,CAAC,OAAO,EAAE;gBACb,OAAO,EAAE,KAAK,EAAE,SAAS,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC;aACzC;YAED,IAAI,KAAK,KAAK,OAAO,CAAC,KAAK,EAAE;gBAC5B,UAAU,CAAC,GAAG,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC;aAChC;YAED,OAAO;gBACN,KAAK,EAAE,OAAO,CAAC,QAAQ,CAAC,KAAK;gBAC7B,OAAO,EAAE,OAAO,CAAC,iBAAiB;aAClC,CAAC;QACH,CAAC;KACD,CAAC;AACH,CAAC,CAAC,CAAC;AAEH,eAAe,QAAQ,CAAC","sourcesContent":["import { create, node, invalidator } from '../vdom';\n\nconst factory = create({ node, invalidator });\n\nconst validity = factory(function({ middleware: { node, invalidator } }) {\n\treturn {\n\t\tget(key: string | number, value: string) {\n\t\t\tconst domNode = node.get(key) as HTMLFormElement | undefined;\n\n\t\t\tif (!domNode) {\n\t\t\t\treturn { valid: undefined, message: '' };\n\t\t\t}\n\n\t\t\tif (value !== domNode.value) {\n\t\t\t\tsetTimeout(() => invalidator());\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tvalid: domNode.validity.valid,\n\t\t\t\tmessage: domNode.validationMessage\n\t\t\t};\n\t\t}\n\t};\n});\n\nexport default validity;\n"]}