(function (factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        var v = factory(require, exports);
        if (v !== undefined) module.exports = v;
    }
    else if (typeof define === "function" && define.amd) {
        define(["require", "exports", "tslib", "../core/vdom", "../core/middleware/injector"], factory);
    }
})(function (require, exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var tslib_1 = require("tslib");
    var vdom_1 = require("../core/vdom");
    var injector_1 = require("../core/middleware/injector");
    var factory = vdom_1.create({ injector: injector_1.default }).properties();
    exports.Link = factory(function Link(_a) {
        var injector = _a.middleware.injector, properties = _a.properties, children = _a.children;
        var _b = properties(), _c = _b.routerKey, routerKey = _c === void 0 ? 'router' : _c, to = _b.to, _d = _b.isOutlet, isOutlet = _d === void 0 ? true : _d, target = _b.target, _e = _b.params, params = _e === void 0 ? {} : _e, onClick = _b.onClick, props = tslib_1.__rest(_b, ["routerKey", "to", "isOutlet", "target", "params", "onClick"]);
        var router = injector.get(routerKey);
        var href = to;
        var linkProps;
        if (router) {
            if (isOutlet) {
                href = router.link(href, params);
            }
            var onclick_1 = function (event) {
                onClick && onClick(event);
                if (!event.defaultPrevented && event.button === 0 && !event.metaKey && !event.ctrlKey && !target) {
                    event.preventDefault();
                    href !== undefined && router.setPath(href);
                }
            };
            linkProps = tslib_1.__assign({}, props, { onclick: onclick_1, href: href });
        }
        else {
            linkProps = tslib_1.__assign({}, props, { href: href });
        }
        return vdom_1.v('a', linkProps, children());
    });
    exports.default = exports.Link;
});
//# sourceMappingURL=Link.js.map